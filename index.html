<!DOCTYPE html>
<html data-filename="pages/Admin" data-linenumber="12" data-visual-selector-id="pages/Admin12" lang="en">
<head data-filename="pages/Admin" data-linenumber="13" data-visual-selector-id="pages/Admin13">
    <meta data-filename="pages/Admin" data-linenumber="14" data-visual-selector-id="pages/Admin14" charset="UTF-8">
    <meta data-filename="pages/Admin" data-linenumber="15" data-visual-selector-id="pages/Admin15" name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-filename="pages/Admin" data-linenumber="16" data-visual-selector-id="pages/Admin16">StreamX - Social Feed</title>
    <style data-filename="pages/Admin" data-linenumber="17" data-visual-selector-id="pages/Admin17">
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #000000;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container { max-width: 800px; margin: 0 auto; padding: 0 1rem; }
        
        /* Header */
        .header {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 4rem;
            padding: 0 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: #000000;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.875rem;
        }
        
        .logo h1 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #000000;
        }
        
        .nav {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .nav-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: #6b7280;
            font-weight: 500;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-btn.active {
            background: #000000;
            color: #ffffff;
        }
        
        .nav-btn:hover:not(.active) {
            background: #f3f4f6;
        }
        
        .profile-icon {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid #e5e7eb;
        }
        
        .profile-icon:hover {
            border-color: #000000;
        }

        .admin-btn {
            background: #dc2626;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .admin-btn:hover {
            background: #b91c1c;
        }
        
        /* Main Content */
        .main-content {
            max-width: 32rem;
            margin: 0 auto;
            padding: 4rem 1rem;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #000000;
            margin-bottom: 0.5rem;
        }
        
        .page-header p {
            color: #6b7280;
            font-size: 1rem;
        }
        
        /* Search Bar */
        .search-container {
            margin-bottom: 2rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.35-4.35'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: 1rem center;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #000000;
            ring: 2px;
        }
        
        /* Custom Alert/Prompt Overlay */
        .custom-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .custom-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .custom-modal {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .custom-modal-overlay.active .custom-modal {
            transform: scale(1);
        }
        
        .custom-modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #000000;
            margin-bottom: 0.5rem;
        }
        
        .custom-modal-message {
            color: #6b7280;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }
        
        .custom-modal-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            margin-bottom: 1rem;
            transition: border-color 0.2s;
        }
        
        .custom-modal-input:focus {
            outline: none;
            border-color: #000000;
        }
        
        .custom-modal-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }
        
        .custom-modal-btn {
            padding: 0.625rem 1.25rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }
        
        .custom-modal-btn-primary {
            background: #000000;
            color: white;
        }
        
        .custom-modal-btn-primary:hover {
            background: #374151;
        }
        
        .custom-modal-btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }
        
        .custom-modal-btn-secondary:hover {
            background: #e5e7eb;
        }
        
        .custom-modal-error {
            color: #dc2626;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        
        /* Paid Partner Banner */
        .partner-banner {
            background: #000000;
            color: #ffffff;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            border: 1px solid #000000;
        }
        
        .partner-title {
            font-size: 1.125rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .partner-amount {
            color: #fbbf24;
            font-weight: bold;
        }
        
        .partner-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 1rem;
            font-size: 0.75rem;
            color: #9ca3af;
        }
        
        .partner-badge {
            background: #374151;
            color: #d1d5db;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 5rem 0;
        }
        
        .empty-icon {
            width: 4rem;
            height: 4rem;
            margin: 0 auto 1.5rem;
            background: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .empty-state h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #000000;
            margin-bottom: 0.5rem;
        }
        
        .empty-state p {
            color: #6b7280;
        }
        
        /* Posts Feed */
        .posts-feed {
            display: grid;
            gap: 1.5rem;
        }
        
        /* Post Card */
        .post-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        
        .post-header {
            display: flex;
            align-items: center;
            justify-between;
            padding: 1rem;
            padding-bottom: 0.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .post-date-location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .post-views {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            color: #3b82f6;
            font-weight: 600;
            font-size: 0.9375rem;
        }
        
        .post-views-icon {
            width: 20px;
            height: 20px;
            fill: #000000;
        }
        
        .post-views-text {
            color: #3b82f6;
            font-weight: 600;
        }
        
        .post-content {
            padding: 0 1rem;
        }
        
        .post-caption {
            color: #000000;
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }
        
        .post-media {
            border-radius: 0.5rem;
            overflow: hidden;
            cursor: pointer;
            margin-bottom: 0.75rem;
        }
        
        .post-image {
            width: 100%;
            max-height: 24rem;
            object-fit: cover;
        }
        
        .post-hashtags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .hashtag {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        /* User Info */
        .post-user {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-top: 1px solid #f3f4f6;
            background: #f9fafb;
        }
        
        .user-avatar {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: 600;
            color: #000000;
            font-size: 0.875rem;
        }
        
        .user-email {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        /* Lightbox */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .lightbox.active {
            opacity: 1;
            visibility: visible;
        }
        
        .lightbox-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
        }
        
        .lightbox-image {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 0.5rem;
        }
        
        .lightbox-close {
            position: absolute;
            top: -3rem;
            right: 0;
            width: 2rem;
            height: 2rem;
            background: transparent;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .hidden { display: none !important; }
        
        /* Multi-image grid */
        .image-grid {
            display: grid;
            gap: 0.125rem;
            cursor: pointer;
            border-radius: 0.5rem;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }
        
        .image-grid.grid-2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .image-grid.grid-multiple {
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        
        .grid-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
        }
        
        .image-overlay {
            position: relative;
        }
        
        .image-count {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
        }
        
        /* Profile Page */
        .profile-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .profile-avatar-large {
            width: 8rem;
            height: 8rem;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #e5e7eb;
            margin: 0 auto 1.5rem;
        }
        
        .profile-name {
            font-size: 1.875rem;
            font-weight: bold;
            color: #000000;
            margin-bottom: 0.5rem;
        }
        
        .profile-email {
            color: #6b7280;
            margin-bottom: 1rem;
        }
        
        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.125rem;
            color: #000000;
            display: block;
        }
        
        /* Create Post Page */
        .create-form {
            max-width: 32rem;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-input,
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: inherit;
        }
        
        .form-textarea {
            min-height: 6rem;
            resize: vertical;
        }
        
        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #000000;
        }
        
        .file-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 0.5rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .file-upload-area:hover {
            border-color: #000000;
            background: #f9fafb;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #000000;
            color: #ffffff;
        }
        
        .btn-primary:hover {
            background: #374151;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .preview-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        
        /* Admin Panel */
        .admin-panel {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .admin-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .admin-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn-delete {
            background: #ef4444;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        .btn-delete:hover {
            background: #dc2626;
        }
        
        .btn-views {
            background: #3b82f6;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        .btn-views:hover {
            background: #2563eb;
        }

        .btn-custom-views {
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .btn-custom-views:hover {
            background: #059669;
        }
        
        .admin-post-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .admin-post-thumbnail {
            width: 4rem;
            height: 4rem;
            object-fit: cover;
            border-radius: 0.375rem;
        }
        
        .admin-post-info {
            flex: 1;
        }
        
        .admin-post-caption {
            font-weight: 600;
            color: #000000;
            margin-bottom: 0.25rem;
        }
        
        .admin-post-stats {
            font-size: 0.875rem;
            color: #6b7280;
        }
    </style>
</head>
<body data-filename="pages/Admin" data-linenumber="777" data-visual-selector-id="pages/Admin777">
    <div data-filename="pages/Admin" data-linenumber="778" data-visual-selector-id="pages/Admin778" id="app">
        <!-- Header -->
        <header data-filename="pages/Admin" data-linenumber="780" data-visual-selector-id="pages/Admin780" class="header">
            <div data-filename="pages/Admin" data-linenumber="781" data-visual-selector-id="pages/Admin781" class="header-content">
                <div data-filename="pages/Admin" data-linenumber="782" data-visual-selector-id="pages/Admin782" class="logo">
                    <div data-filename="pages/Admin" data-linenumber="783" data-visual-selector-id="pages/Admin783" class="logo-icon">S</div>
                    <h1 data-filename="pages/Admin" data-linenumber="784" data-visual-selector-id="pages/Admin784">StreamX</h1>
                </div>
                
                <nav data-filename="pages/Admin" data-linenumber="787" data-visual-selector-id="pages/Admin787" class="nav">
                    <button data-filename="pages/Admin" data-linenumber="788" data-visual-selector-id="pages/Admin788" class="nav-btn" data-page="feed">Feed</button>
                    <span data-filename="pages/Admin" data-linenumber="789" data-visual-selector-id="pages/Admin789" style="color: #9ca3af; margin: 0 0.5rem;">+</span>
                    <button data-filename="pages/Admin" data-linenumber="790" data-visual-selector-id="pages/Admin790" class="nav-btn" data-page="create">Create</button>
                    <img data-filename="pages/Admin" data-linenumber="791" data-visual-selector-id="pages/Admin791" id="headerProfileIcon" class="profile-icon" src="" alt="Profile" style="display:none;">
                    <button data-filename="pages/Admin" data-linenumber="792" data-visual-selector-id="pages/Admin792" class="admin-btn" onclick="promptAdminPassword()">Admin</button>
                </nav>
            </div>
        </header>

        <!-- Feed Page -->
        <div data-filename="pages/Admin" data-linenumber="798" data-visual-selector-id="pages/Admin798" id="feedPage" class="main-content">
            <div data-filename="pages/Admin" data-linenumber="799" data-visual-selector-id="pages/Admin799" class="page-header">
                <h1 data-filename="pages/Admin" data-linenumber="800" data-visual-selector-id="pages/Admin800">Feed</h1>
                <p data-filename="pages/Admin" data-linenumber="801" data-visual-selector-id="pages/Admin801">Explore content from the community.</p>
            </div>
            
            <div data-filename="pages/Admin" data-linenumber="804" data-visual-selector-id="pages/Admin804" class="search-container">
                <input data-filename="pages/Admin" data-linenumber="805" data-visual-selector-id="pages/Admin805" type="text" id="searchInput" class="search-input" placeholder="Search posts by caption, hashtag, or location...">
            </div>
            
            <div data-filename="pages/Admin" data-linenumber="808" data-visual-selector-id="pages/Admin808" class="partner-banner">
                <div data-filename="pages/Admin" data-linenumber="809" data-visual-selector-id="pages/Admin809" class="partner-title">
                    <svg data-filename="pages/Admin" data-linenumber="810" data-visual-selector-id="pages/Admin810" width="20" height="20" fill="#fbbf24" viewBox="0 0 24 24"><path data-filename='pages/Admin' data-linenumber='810' data-visual-selector-id='pages/Admin810' d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    Become a StreamX Partner!
                </div>
                <p data-filename="pages/Admin" data-linenumber="813" data-visual-selector-id="pages/Admin813">Get <span data-filename="pages/Admin" data-linenumber="813" data-visual-selector-id="pages/Admin813" class="partner-amount">R15 000 monthly</span> for being a top creator. Reach 300 posts in a year to qualify.</p>
                <div data-filename="pages/Admin" data-linenumber="814" data-visual-selector-id="pages/Admin814" class="partner-footer">
                    <span data-filename="pages/Admin" data-linenumber="815" data-visual-selector-id="pages/Admin815">
                        <svg data-filename="pages/Admin" data-linenumber="816" data-visual-selector-id="pages/Admin816" width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:0.25rem;"><circle data-filename='pages/Admin' data-linenumber='816' data-visual-selector-id='pages/Admin816' cx="12" cy="12" r="10"/><path data-filename='pages/Admin' data-linenumber='816' data-visual-selector-id='pages/Admin816' d="M12 16v-4M12 8h.01"/></svg>
                        Future updates will track signed-in users for eligibility.
                    </span>
                    <span data-filename="pages/Admin" data-linenumber="819" data-visual-selector-id="pages/Admin819" class="partner-badge">Unavailable for now</span>
                </div>
            </div>

            <div data-filename="pages/Admin" data-linenumber="823" data-visual-selector-id="pages/Admin823" id="postsFeed" class="posts-feed"></div>
        </div>

        <!-- Create Page -->
        <div data-filename="pages/Admin" data-linenumber="827" data-visual-selector-id="pages/Admin827" id="createPage" class="main-content hidden">
            <div data-filename="pages/Admin" data-linenumber="828" data-visual-selector-id="pages/Admin828" class="page-header">
                <h1 data-filename="pages/Admin" data-linenumber="829" data-visual-selector-id="pages/Admin829">Create</h1>
                <p data-filename="pages/Admin" data-linenumber="830" data-visual-selector-id="pages/Admin830">Share your moment with the community.</p>
            </div>
            
            <div data-filename="pages/Admin" data-linenumber="833" data-visual-selector-id="pages/Admin833" class="create-form">
                <div data-filename="pages/Admin" data-linenumber="834" data-visual-selector-id="pages/Admin834" class="form-group">
                    <textarea data-filename="pages/Admin" data-linenumber="835" data-visual-selector-id="pages/Admin835" id="createCaption" class="form-textarea" placeholder="What's on your mind?" rows="4"></textarea>
                </div>
                
                <div data-filename="pages/Admin" data-linenumber="838" data-visual-selector-id="pages/Admin838" class="form-group">
                    <input data-filename="pages/Admin" data-linenumber="839" data-visual-selector-id="pages/Admin839" type="text" id="createLocation" class="form-input" placeholder="📍 Location">
                </div>
                
                <div data-filename="pages/Admin" data-linenumber="842" data-visual-selector-id="pages/Admin842" class="form-group">
                    <input data-filename="pages/Admin" data-linenumber="843" data-visual-selector-id="pages/Admin843" type="text" id="createHashtag" class="form-input" placeholder="# Add hashtag">
                </div>
                
                <div data-filename="pages/Admin" data-linenumber="846" data-visual-selector-id="pages/Admin846" id="hashtagsList" style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;"></div>
                
                <div data-filename="pages/Admin" data-linenumber="848" data-visual-selector-id="pages/Admin848" id="previewContainer" class="preview-grid hidden"></div>
                
                <div data-filename="pages/Admin" data-linenumber="850" data-visual-selector-id="pages/Admin850" class="file-upload-area" id="fileUploadArea">
                    <input data-filename="pages/Admin" data-linenumber="851" data-visual-selector-id="pages/Admin851" type="file" id="fileInput" accept="image/*,video/*" multiple style="display:none;">
                    <svg data-filename="pages/Admin" data-linenumber="852" data-visual-selector-id="pages/Admin852" width="32" height="32" fill="#9ca3af" viewBox="0 0 24 24" style="margin:0 auto 0.5rem;display:block;"><path data-filename='pages/Admin' data-linenumber='852' data-visual-selector-id='pages/Admin852' d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline data-filename='pages/Admin' data-linenumber='852' data-visual-selector-id='pages/Admin852' points="17 8 12 3 7 8"/><line data-filename='pages/Admin' data-linenumber='852' data-visual-selector-id='pages/Admin852' x1="12" y1="3" x2="12" y2="15"/></svg>
                    <p data-filename="pages/Admin" data-linenumber="853" data-visual-selector-id="pages/Admin853" style="color:#6b7280;">Click to upload photos or videos</p>
                </div>
                
                <button data-filename="pages/Admin" data-linenumber="856" data-visual-selector-id="pages/Admin856" class="btn btn-primary btn-block" id="createPostBtn">Share Post</button>
            </div>
        </div>

        <!-- Profile Page -->
        <div data-filename="pages/Admin" data-linenumber="861" data-visual-selector-id="pages/Admin861" id="profilePage" class="main-content hidden">
            <div data-filename="pages/Admin" data-linenumber="862" data-visual-selector-id="pages/Admin862" class="profile-header">
                <img data-filename="pages/Admin" data-linenumber="863" data-visual-selector-id="pages/Admin863" id="profileAvatar" class="profile-avatar-large" src="" alt="Profile">
                <h1 data-filename="pages/Admin" data-linenumber="864" data-visual-selector-id="pages/Admin864" class="profile-name" id="profileName">User</h1>
                <p data-filename="pages/Admin" data-linenumber="865" data-visual-selector-id="pages/Admin865" class="profile-email" id="profileEmail">user@example.com</p>
                
                <div data-filename="pages/Admin" data-linenumber="867" data-visual-selector-id="pages/Admin867" class="profile-stats">
                    <div data-filename="pages/Admin" data-linenumber="868" data-visual-selector-id="pages/Admin868">
                        <span data-filename="pages/Admin" data-linenumber="869" data-visual-selector-id="pages/Admin869" class="stat-value" id="profilePostCount">0</span>
                        <span data-filename="pages/Admin" data-linenumber="870" data-visual-selector-id="pages/Admin870">Posts</span>
                    </div>
                    <div data-filename="pages/Admin" data-linenumber="872" data-visual-selector-id="pages/Admin872">
                        <span data-filename="pages/Admin" data-linenumber="873" data-visual-selector-id="pages/Admin873" class="stat-value" id="profileViewCount">0</span>
                        <span data-filename="pages/Admin" data-linenumber="874" data-visual-selector-id="pages/Admin874">Total Views</span>
                    </div>
                </div>
            </div>
            
            <div data-filename="pages/Admin" data-linenumber="879" data-visual-selector-id="pages/Admin879" class="form-group">
                <label data-filename="pages/Admin" data-linenumber="880" data-visual-selector-id="pages/Admin880" style="display:block;margin-bottom:0.5rem;font-weight:600;">Upload Profile Picture</label>
                <input data-filename="pages/Admin" data-linenumber="881" data-visual-selector-id="pages/Admin881" type="file" id="profilePictureFile" accept="image/*" class="form-input">
            </div>
            <button data-filename="pages/Admin" data-linenumber="883" data-visual-selector-id="pages/Admin883" class="btn btn-primary btn-block" id="saveProfileBtn">Save Profile Picture</button>
            
            <h2 data-filename="pages/Admin" data-linenumber="885" data-visual-selector-id="pages/Admin885" style="margin:2rem 0 1rem;font-size:1.5rem;font-weight:bold;">My Posts</h2>
            <div data-filename="pages/Admin" data-linenumber="886" data-visual-selector-id="pages/Admin886" id="profilePosts" class="posts-feed"></div>
        </div>

        <!-- Admin Panel -->
        <div data-filename="pages/Admin" data-linenumber="890" data-visual-selector-id="pages/Admin890" id="adminPanel" class="main-content hidden">
            <div data-filename="pages/Admin" data-linenumber="891" data-visual-selector-id="pages/Admin891" class="admin-panel">
                <h2 data-filename="pages/Admin" data-linenumber="892" data-visual-selector-id="pages/Admin892" class="admin-title">Admin Panel</h2>
                <p data-filename="pages/Admin" data-linenumber="893" data-visual-selector-id="pages/Admin893" style="color:#6b7280;margin-bottom:1rem;">Manage posts and views</p>
                <div data-filename="pages/Admin" data-linenumber="894" data-visual-selector-id="pages/Admin894" id="adminPostsList"></div>
            </div>
        </div>

        <!-- Lightbox -->
        <div data-filename="pages/Admin" data-linenumber="899" data-visual-selector-id="pages/Admin899" id="lightbox" class="lightbox">
            <div data-filename="pages/Admin" data-linenumber="900" data-visual-selector-id="pages/Admin900" class="lightbox-content">
                <button data-filename="pages/Admin" data-linenumber="901" data-visual-selector-id="pages/Admin901" class="lightbox-close" id="lightboxClose">×</button>
                <img data-filename="pages/Admin" data-linenumber="902" data-visual-selector-id="pages/Admin902" id="lightboxImage" class="lightbox-image" src="" alt="">
            </div>
        </div>
        
        <!-- Custom Modal -->
        <div data-filename="pages/Admin" data-linenumber="907" data-visual-selector-id="pages/Admin907" id="customModal" class="custom-modal-overlay">
            <div data-filename="pages/Admin" data-linenumber="908" data-visual-selector-id="pages/Admin908" class="custom-modal">
                <h2 data-filename="pages/Admin" data-linenumber="909" data-visual-selector-id="pages/Admin909" class="custom-modal-title" id="modalTitle">Enter Password</h2>
                <p data-filename="pages/Admin" data-linenumber="910" data-visual-selector-id="pages/Admin910" class="custom-modal-message" id="modalMessage">Please enter the admin password to continue.</p>
                <div data-filename="pages/Admin" data-linenumber="911" data-visual-selector-id="pages/Admin911" id="modalError" class="custom-modal-error hidden"></div>
                <input data-filename="pages/Admin" data-linenumber="912" data-visual-selector-id="pages/Admin912" type="password" id="modalInput" class="custom-modal-input" placeholder="Password">
                <div data-filename="pages/Admin" data-linenumber="913" data-visual-selector-id="pages/Admin913" class="custom-modal-buttons">
                    <button data-filename="pages/Admin" data-linenumber="914" data-visual-selector-id="pages/Admin914" class="custom-modal-btn custom-modal-btn-secondary" id="modalCancel">Cancel</button>
                    <button data-filename="pages/Admin" data-linenumber="915" data-visual-selector-id="pages/Admin915" class="custom-modal-btn custom-modal-btn-primary" id="modalConfirm">Submit</button>
                </div>
            </div>
        </div>
    </div>

  <script type="module">
  // ---------- FIREBASE SETUP ----------
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js";
  import {
    getFirestore,
    collection,
    addDoc,
    doc,
    setDoc,
    getDoc,
    getDocs,
    onSnapshot,
    query,
    orderBy,
    serverTimestamp,
    updateDoc
  } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
  import { 
    getStorage, 
    ref as storageRef, 
    uploadString, 
    uploadBytes, 
    getDownloadURL 
  } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDAZwvenI3n3u6y16tF0ENlJLpSTFhjJlY",
    authDomain: "streamxpro-37aaf.firebaseapp.com",
    projectId: "streamxpro-37aaf",
    storageBucket: "streamxpro-37aaf.firebasestorage.app",
    messagingSenderId: "874159026275",
    appId: "1:874159026275:web:698e236398b9211b9d0856",
    measurementId: "G-HWXNCSZXNC"
  };

  const app = initializeApp(firebaseConfig);
  try { getAnalytics(app); } catch(e){ /* ignore analytics error */ }
  const db = getFirestore(app);
  const storage = getStorage(app);

  const ADMIN_PASSWORD = 'VNAXXTTM';

  // ---------- STATE ----------
  let posts = [];
  let users = {};
  let currentUser = null;
  let nextId = 1;
  let currentPage = 'feed';
  let uploadedFiles = [];
  let currentHashtags = [];

  // ---------- CUSTOM MODALS ----------
  function showCustomModal(title, message, isPassword = false) {
    // unchanged modal code
  }

  async function customPrompt(message, isPassword = false) {
    try { return await showCustomModal(isPassword ? 'Admin Access' : 'Input Required', message, isPassword); }
    catch { return null; }
  }

  async function customConfirm(message) {
    // unchanged confirm modal
  }

  // ---------- FIRESTORE HELPERS ----------
  function firestoreDocToPost(docSnap) {
    const data = docSnap.data();
    return {
      id: data.id ?? Number(docSnap.id) ?? null,
      caption: data.caption ?? '',
      content_urls: data.content_urls ?? [],
      content_type: data.content_type ?? 'image',
      hashtags: data.hashtags ?? [],
      location: data.location ?? '',
      views_count: Number(data.views_count ?? 0),
      created_date: data.created_date ? (data.created_date.toDate ? data.created_date.toDate().toISOString() : data.created_date) : (data.created_date_iso ?? new Date().toISOString()),
      created_by: data.created_by ?? 'unknown@streamx.com',
      _docId: docSnap.id
    };
  }

  const postsCol = collection(db, "posts");
  const postsQuery = query(postsCol, orderBy("created_date", "desc"));

  let unsubscribePosts = null;
  try {
    unsubscribePosts = onSnapshot(postsQuery, (snapshot) => {
      posts = snapshot.docs.map(firestoreDocToPost);
      // update nextId
      posts.forEach(p => {
        if (p.id && Number.isFinite(p.id) && p.id >= nextId) nextId = Number(p.id) + 1;
      });
      renderPosts();
    }, (err) => {
      console.error("Firestore posts onSnapshot error:", err);
    });
  } catch (e) { console.error("Failed starting posts snapshot:", e); }

  async function loadUsersFromCloud() {
    try {
      const usersCol = collection(db, "users");
      const snapshot = await getDocs(usersCol);
      snapshot.forEach(docSnap => { users[docSnap.id] = docSnap.data(); });
    } catch(e){ console.warn("Failed loading users from cloud:", e); }
  }
  loadUsersFromCloud().catch(()=>{});

  async function syncCurrentUserToCloud() {
    if (!currentUser || !currentUser.email) return;
    try { await setDoc(doc(db, "users", currentUser.email), currentUser, { merge: true }); }
    catch(e){ console.warn("Failed to sync user to cloud:", e); }
  }

  async function uploadFilesAndGetUrls(postId, files) {
    const urls = [];
    for (const file of files) {
      try {
        const path = `posts/${postId}/${Date.now()}_${file.name || "file"}`;
        const ref = storageRef(storage, path);
        const snapshot = await uploadBytes(ref, file);
        const downloadUrl = await getDownloadURL(snapshot.ref);
        urls.push(downloadUrl);
      } catch(e) {
        console.warn("Upload file failed, using DataURL fallback:", e);
        const dataUrl = await new Promise((resolve) => {
          const reader = new FileReader();
          reader.onload = (ev) => resolve(ev.target.result);
          reader.readAsDataURL(file);
        });
        urls.push(dataUrl);
      }
    }
    return urls;
  }

  // ---------- POST CREATION ----------
  createPostBtn.addEventListener('click', async () => {
    const caption = createCaption.value.trim();
    const location = createLocation.value.trim();
    if (!caption && uploadedFiles.length === 0) { showCustomModal('Error', 'Please add a caption or upload some media.'); return; }

    const postNumericId = nextId++;
    let contentUrls = [];
    if (uploadedFiles.length > 0) contentUrls = await uploadFilesAndGetUrls(postNumericId, uploadedFiles);

    const newPost = {
      id: postNumericId,
      caption,
      location,
      hashtags: [...currentHashtags],
      content_urls: contentUrls,
      content_type: uploadedFiles[0]?.type?.startsWith('video/') ? 'video' : 'image',
      views_count: Math.floor(Math.random() * (50000 - 20000 + 1)) + 20000,
      created_date: serverTimestamp(),
      created_date_iso: new Date().toISOString(),
      created_by: currentUser.email
    };

    try { await addDoc(postsCol, newPost); }
    catch(e){ console.warn("Failed to add post to Firestore:", e); }

    createCaption.value = '';
    createLocation.value = '';
    createHashtag.value = '';
    fileInput.value = '';
    uploadedFiles = [];
    currentHashtags = [];
    previewContainer.classList.add('hidden');
    hashtagsList.innerHTML = '';
    navigateTo('feed');
  });

  // ---------- REMOVE LOCAL STORAGE ----------
  // All previous calls to localStorage.setItem or getItem have been removed.
  // The app now relies 100% on Firebase for posts, users, nextId, and currentUser.

  // ---------- REST OF YOUR LOGIC ----------
  // Render posts, profile, admin panel, lightbox, search, navigation, hashtags, etc.
  // Keep all other functions intact (renderPosts, renderProfile, renderAdminPanel, increaseViews, deletePost, etc.)
</script>
</body>
</html>
